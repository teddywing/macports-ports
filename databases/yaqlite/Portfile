# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cargo 1.0

github.setup        teddywing yaqlite 0.0.1 v
github.tarball_from archive

categories          databases textproc
platforms           darwin
license             GPL-3+
maintainers         @teddywing

description         Bridge between YAML and SQLite
long_description    A bridge between YAML and SQLite. Enables inserting YAML \
                    records into a database and selecting records as YAML.

checksums-append    ${distfiles} \
                    rmd160  c799daf7113027e02eb2e931d61a1936323ec044 \
                    sha256  f28dbeef1de974fa6c9e07ba78179a1dcf75fe5c1342cabde135e7d928045aee \
                    size    23341

cargo.crates \
    ahash                            0.7.6  fcb51a0695d8f838b1ee009b3fbf66bda078cd64590202a864a8f3e8c4315c47 \
    anyhow                          1.0.56  4361135be9122e0870de935d7c439aef945b9f9ddd4199a553b5270b49c82a27 \
    autocfg                          1.1.0  d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa \
    bitflags                         1.3.2  bef38d45163c2f1dde094a7dfd33ccf595c92905c8f8f4fdc18d06fb1037718a \
    cfg-if                           1.0.0  baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd \
    clap                             3.1.6  d8c93436c21e4698bacadf42917db28b23017027a4deccb35dbe47a7e7840123 \
    clap_derive                      3.1.4  da95d038ede1a964ce99f49cbe27a7fb538d1da595e4b4f70b8c8f338d17bf16 \
    exitcode                         1.1.2  de853764b47027c2e862a995c34978ffa63c1501f2e15f987ba11bd4f9bba193 \
    fallible-iterator                0.2.0  4443176a9f2c162692bd3d352d745ef9413eec5782a80d8fd6f8a1ac692a07f7 \
    fallible-streaming-iterator      0.1.9  7360491ce676a36bf9bb3c56c1aa791658183a54d2744120f27285738d90465a \
    getrandom                        0.2.5  d39cd93900197114fa1fcb7ae84ca742095eed9442088988ae74fa744e930e77 \
    hashbrown                       0.11.2  ab5ef0d4909ef3724cc8cce6ccc8572c5c817592e9285f5464f8e86f8bd3726e \
    hashlink                         0.7.0  7249a3129cbc1ffccd74857f81464a323a152173cdb134e0fd81bc803b29facf \
    heck                             0.4.0  2540771e65fc8cb83cd6e8a237f70c319bd5c29f78ed1084ba5d50eeac86f7f9 \
    indexmap                         1.8.0  282a6247722caba404c065016bbfa522806e51714c34f5dfc3e4a3a46fcb4223 \
    lazy_static                      1.4.0  e2abad23fbc42b3700f2f279844dc832adb2b2eb069b2df918f455c4e18cc646 \
    libc                           0.2.119  1bf2e165bb3457c8e098ea76f3e3bc9db55f87aa90d52d0e6be741470916aaa4 \
    libsqlite3-sys                  0.24.1  cb644c388dfaefa18035c12614156d285364769e818893da0dda9030c80ad2ba \
    linked-hash-map                  0.5.4  7fb9b38af92608140b86b693604b9ffcc5824240a484d1ecd4795bacb2fe88f3 \
    memchr                           2.4.1  308cc39be01b73d0d18f82a0e7b2a3df85245f84af96fdddc5d202d27e47b86a \
    once_cell                       1.10.0  87f3e037eac156d1775da914196f0f37741a274155e34a0b7e427c35d2a2ecb9 \
    os_str_bytes                     6.0.0  8e22443d1643a904602595ba1cd8f7d896afe56d26712531c5ff73a15b2fbf64 \
    pkg-config                      0.3.24  58893f751c9b0412871a09abd62ecd2a00298c6c83befa223ef98c52aef40cbe \
    proc-macro-error                 1.0.4  da25490ff9892aab3fcf7c36f08cfb902dd3e71ca0f9f9517bea02a73a5ce38c \
    proc-macro-error-attr            1.0.4  a1be40180e52ecc98ad80b184934baf3d0d29f979574e439af5a55274b35f869 \
    proc-macro2                     1.0.36  c7342d5883fbccae1cc37a2353b09c87c9b0f3afd73f5fb9bba687a1f733b029 \
    quote                           1.0.15  864d3e96a899863136fc6e99f3d7cae289dafe43bf2c5ac19b70df7210c0a145 \
    rusqlite                        0.27.0  85127183a999f7db96d1a976a309eebbfb6ea3b0b400ddd8340190129de6eb7a \
    smallvec                         1.8.0  f2dd574626839106c320a323308629dcb1acfc96e32a8cba364ddc61ac23ee83 \
    strsim                          0.10.0  73473c0e59e6d5812c5dfe2a064a6444949f089e20eec9a2e5506596494e4623 \
    syn                             1.0.86  8a65b3f4ffa0092e9887669db0eae07941f023991ab58ea44da8fe8e2d511c6b \
    textwrap                        0.15.0  b1141d4d61095b28419e22cb0bbf02755f5e54e0526f97f1e3d1d160e60885fb \
    thiserror                       1.0.30  854babe52e4df1653706b98fcfc05843010039b406875930a70e4d9644e5c417 \
    thiserror-impl                  1.0.30  aa32fd3f627f367fe16f893e2597ae3c05020f8bba2666a4e6ea73d377e5714b \
    unicode-xid                      0.2.2  8ccb82d61f80a663efe1f787a51b16b5a51e3314d6ac365b08639f52387b33f3 \
    vcpkg                           0.2.15  accd4ea62f7bb7a82fe23066fb0957d48ef677f6eeb8215f372f52e48bb32426 \
    version_check                    0.9.4  49874b5167b65d7193b8aba1567f5c7d93d001cafc34600cee003eda787e483f \
    wasi                          0.10.2+wasi-snapshot-preview1  fd6fbd9a79829dd1ad0cc20627bf1ed606756a7f77edff7b66b7064f9cb327c6 \
    yaml-rust-davvid                 0.5.1  ff0648c4e5c02911a6acf9e60fae9becf2bab890c682cd3126c9318a4619ce2b

destroot {
    xinstall -m 755 ${worksrcpath}/target/[cargo.rust_platform]/release/yaqlite \
        ${destroot}${prefix}/bin/

    xinstall -m 644 ${worksrcpath}/share/man/man1/yaqlite.1 \
        ${destroot}${prefix}/share/man/man1/
}
